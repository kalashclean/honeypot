acl localnet src 172.30.0.0/24  # RFC1918 possible internal network
acl SSL_ports port 443
acl Safe_ports port 80      # http
acl Safe_ports port 21      # ftp
acl Safe_ports port 443     # https
acl Safe_ports port 70      # gopher
acl Safe_ports port 210     # wais
acl Safe_ports port 1025-65535  # unregistered ports
acl Safe_ports port 280     # http-mgmt
acl Safe_ports port 488     # gss-http
acl Safe_ports port 591     # filemaker
acl Safe_ports port 777     # multiling http
acl CONNECT method CONNECT
acl blocksite dstdomain /etc/squid/blocksite
http_access deny blocksite
#http_access allow localnet
http_port 3128
http_port 80
http_port 8000
http_port 8080
coredump_dir /var/spool/squid
refresh_pattern ^ftp:       1440    20% 10080
refresh_pattern ^gopher:    1440    0%  1440
refresh_pattern -i (/cgi-bin/|\?) 0 0%  0
refresh_pattern (Release|Packages(.gz)*)$      0       20%     2880
refresh_pattern .       0   20% 4320
auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd
auth_param basic realm proxy
acl ncsa_users proxy_auth REQUIRED
http_access allow ncsa_users
http_access deny all 
cache_log /var/log/squid/cache.log
logformat squid %ts.%03tu %6tr %>a %Ss/%03>Hs %<st %rm %ru %[un %pw %Sh/%<a %mt
#logformat myformat %ts.%03tu %6tr %>a %Ss/%03>Hs %<st %rm %ru HTTP/%rv %mt [%{Referer}>h] [%{User-Agent}>h] req_sz=%{SIZE_IN} res_sz=%{SIZE_OUT} get_params=%{ARGS} post_params=%{POST_PAYLOAD} %p
#logformat squid_combined %>a %[ui %[un [%tl] "%rm %ru HTTP/%rv" %>Hs %<st "%{Referer}>h" "%{User-Agent}>h" req_body="%{POST_PAYLOAD}" res_body="%{RESPONSE_BODY}" %Ss:%03>Hs:%<st
#logformat squid_combined %>a %[ui %[un [%tl] "%rm %ru HTTP/%rv" %>Hs %<st "%{Referer}>h" "%{User-Agent}>h" req_body=%{POST_PAYLOAD} res_body=%{RESPONSE_BODY} %Ss:%03>Hs:%<st
#logformat squid_combined %>a %[ui %[un [%tl] "%rm %ru HTTP/%rv" %>Hs %<st "%{Referer}>h" "%{User-Agent}>h" req_body=%{BODY} res_body=%{BODY} %Ss:%03>Hs:%<st
#logformat custom_request_log %>a %>p %m %ru %un %Sh/%<a %<p %la %lp %>A %Ss/%03>Hs
logformat custom_request_log %>a %>p %rm %ru %un %Sh/%<a %<p %la %lp %>A %Ss/%03>Hs

access_log /var/log/service/access.log squid
access_log /var/log/service/proxy.log custom_request_log
